function bindUploadFileList(){jQuery("a.insert").bind("click",function(){var b,c,d,a=jQuery(this).parent().attr("data-url");return"undefined"==typeof a&&(b=jQuery(this).prev().val(),console.log(b),c=$.ajax({type:"get",url:"media.php?cid="+b,async:!1,success:function(a){return a}}),a=getSubstr(c.responseText,'"mono w-100" value="','" readonly')),console.log(a),"undefined"==typeof a||""==a?(alert("插入图片失败，请重新尝试！"),!1):(d=jQuery(this).text(),console.log(d),validateImage(a)?jQuery(".simditor-body").append('<img alt="'+d+'" src="'+a+'">'):validateVideo(a)?jQuery(".simditor-body").append('<embed src="'+a+'" title="'+d+'"></embed>'):jQuery(".simditor-body").append('<a href="'+a+'" target="_blank">'+d+"</a>"),!1)})}function getSubstr(a,b,c){var e,f,d=a.indexOf(b);return-1==d?"":(d+=b.length,e=""==c?a.length:a.indexOf(c),-1==e?"":f=a.substr(d,e-d))}function validateImage(a){a=a.toLowerCase();var b=/^(\s|\S)+(gif|jpg|jpeg|png|tiff|bmp)+$/;return b.test(a)?!0:!1}function validateVideo(a){a=a.toLowerCase();var b=/^(\s|\S)+(mp3|wmv|wma|rmvb|rm|avi|flv|mp4|swf)+$/;return b.test(a)?!0:!1}var editor=new Simditor({textarea:jQuery("#text"),toolbar:["fullscreen","|","title","bold","italic","underline","strikethrough","|","fontScale","color","mark","|","ol","ul","|","blockquote","code","table","link","image","video","checklist","hr","|","indent","outdent","alignment","|","emoji","html","|"],codeLanguages:[{name:"HTML / XML",value:"markup"},{name:"CSS",value:"css-extras"},{name:"JavaScript",value:"javascript"},{name:"PHP",value:"php-extras"},{name:"ASP.NET",value:"aspnet"},{name:"SQL",value:"sql"},{name:"Lua",value:"lua"},{name:"BASIC",value:"basic"},{name:"Objective-C",value:"objectivec"},{name:"Pascal",value:"pascal"},{name:"C",value:"c"},{name:"C#",value:"csharp"},{name:"C++",value:"cpp"},{name:"C-Like",value:"clike"},{name:"易语言",value:"el"},{name:"Go",value:"go"},{name:"HTTP",value:"http"},{name:"INI",value:"ini"},{name:"Java",value:"java"},{name:"Smarty",value:"smarty"},{name:"ActionScript",value:"actionscript"},{name:"Bash",value:"bash"},{name:"CoffeeScript",value:"coffeescript"},{name:"Diff",value:"diff"},{name:"Git",value:"git"},{name:"Less",value:"less"},{name:"MarkDown",value:"markdown"},{name:"NSIS",value:"nsis"},{name:"Perl",value:"perl"},{name:"PowerShell",value:"powershell"},{name:"Python",value:"python"},{name:"Ruby",value:"ruby"},{name:"Sass",value:"sass"},{name:"Scss",value:"scss"},{name:"Swift",value:"swift"},{name:"Vim",value:"vim"},{name:"YAML",value:"yaml"}],emoji:{autoClose:!0,imagePath:simditorPath+"/images/emoji/",categories:["face","fashion","animal","food","travel","time","work","font","tool","other"]},toolbarFloat:!0,tabIndent:!0,pasteImage:!1,upload:!1,defaultImage:simditorPath+"/images/default.png"});jQuery(".simditor-toolbar ul").append('<li><a class="toolbar-item toolbar-item-add-more" href="javascript:;" title="摘要分割线"><span class="simditor-icon simditor-icon-add-more"></span></a></li>'),jQuery("a.toolbar-item-add-more").bind("click",function(){jQuery(".simditor-body").append("—————More—————")}),jQuery("ul#file-list").mouseenter(function(){bindUploadFileList()}),$("ul#file-list").mouseleave(function(){$("a.insert").unbind("click")});